# FFTW-Playground

This repository is a small practice playground for FFTW.

## Notes

I generated a signal with sample rate of 32.

The signal is composed of 3 sin waves with frequency of 1Hz, 2Hz and 5Hz.

The signal is generated using the following code:

```c++
// Create a signal for input.
for (int i = 0; i < nfft; i++) {
  in[i][0] = (sin(i * 2 * M_PI * (1 / (double)nfft)) +
              sin(i * 2 * M_PI * (2 / (double)nfft)) +
              sin(i * 2 * M_PI * (5 / (double)nfft)));
  in[i][1] = 0;
  std::cout << "Time " << (double)i / (double)nfft << ", value: " << in[i][0]
            << std::endl;
}
```

Here, I assume the sample time is 1 second. Thus, a 1Hz sin wave should be generated by `sin(i * 2 * M_PI * (1 / (double)nfft))`.

Notice that all the imaginary part of the input data should be initialized to 0.

To perform a inverse fft:

```c++
for (int i = 0; i < nfft; i++) {
  std::cout << "Time " << (double)i / (double)nfft
            << "\t: " << in[i][0] / (double)nfft << std::endl;
}
```

According to the [fftw documentation](https://www.fftw.org/fftw3_doc/The-1d-Discrete-Fourier-Transform-_0028DFT_0029.html)

> FFTW computes an unnormalized transform, in that there is no coefficient in front of the summation in the DFT. In other words, applying the forward and then the backward transform will multiply the input by n.

Thus, we devided the result data by `nfft` to get the original signal.

Building and running the source code will output:

```
Time 0.0000     : 0.0000
Time 0.0312     : 1.4092
Time 0.0625     : 2.0137
Time 0.0938     : 1.6745
Time 0.1250     : 1.0000
Time 0.1562     : 0.7746
Time 0.1875     : 1.2483
Time 0.2188     : 1.9190
Time 0.2500     : 2.0000
Time 0.2812     : 1.1537
Time 0.3125     : -0.1659
Time 0.3438     : -1.0732
Time 0.3750     : -1.0000
Time 0.4062     : -0.1732
Time 0.4375     : 0.5995
Time 0.4688     : 0.6439
Time 0.5000     : 0.0000
Time 0.5312     : -0.6439
Time 0.5625     : -0.5995
Time 0.5938     : 0.1732
Time 0.6250     : 1.0000
Time 0.6562     : 1.0732
Time 0.6875     : 0.1659
Time 0.7188     : -1.1537
Time 0.7500     : -2.0000
Time 0.7812     : -1.9190
Time 0.8125     : -1.2483
Time 0.8438     : -0.7746
Time 0.8750     : -1.0000
Time 0.9062     : -1.6745
Time 0.9375     : -2.0137
Time 0.9688     : -1.4092
Freq 0  : 0.0000
Freq 1  : 16.0000
Freq 2  : 16.0000
Freq 3  : 0.0000
Freq 4  : 0.0000
Freq 5  : 16.0000
Freq 6  : 0.0000
Freq 7  : 0.0000
Freq 8  : 0.0000
Freq 9  : 0.0000
Freq 10 : 0.0000
Freq 11 : 0.0000
Freq 12 : 0.0000
Freq 13 : 0.0000
Freq 14 : 0.0000
Freq 15 : 0.0000
Time 0.0000     : 0.0000
Time 0.0312     : 1.4092
Time 0.0625     : 2.0137
Time 0.0938     : 1.6745
Time 0.1250     : 1.0000
Time 0.1562     : 0.7746
Time 0.1875     : 1.2483
Time 0.2188     : 1.9190
Time 0.2500     : 2.0000
Time 0.2812     : 1.1537
Time 0.3125     : -0.1659
Time 0.3438     : -1.0732
Time 0.3750     : -1.0000
Time 0.4062     : -0.1732
Time 0.4375     : 0.5995
Time 0.4688     : 0.6439
Time 0.5000     : 0.0000
Time 0.5312     : -0.6439
Time 0.5625     : -0.5995
Time 0.5938     : 0.1732
Time 0.6250     : 1.0000
Time 0.6562     : 1.0732
Time 0.6875     : 0.1659
Time 0.7188     : -1.1537
Time 0.7500     : -2.0000
Time 0.7812     : -1.9190
Time 0.8125     : -1.2483
Time 0.8438     : -0.7746
Time 0.8750     : -1.0000
Time 0.9062     : -1.6745
Time 0.9375     : -2.0137
Time 0.9688     : -1.4092
```
